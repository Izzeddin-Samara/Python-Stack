<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Favorite Books</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
</head>
<body>
    <div class="container">
        <h1>Welcome, {{ user.first_name }}!</h1>
        <div class="form-container">
            <h2>Add a Favorite Book</h2>
            <form action="{% url 'add_book' %}" method="POST">
                {% csrf_token %}
                <label for="title">Title</label>
                <input type="text" id="title" name="title">
                <label for="description">Description</label>
                <textarea id="description" name="description"></textarea>
                <button type="submit">Add</button>
            </form>
        </div>
        <div class="books-list">
            <h2>All Books</h2>
            <ul>
                {% for book in books %}
                    <li>
                        <a href="{% url 'book_detail' book.id %}">{{ book.title }}</a> (added by {{ book.uploaded_by.first_name }} {{ book.uploaded_by.last_name }})
                        {% if user in book.users_who_like.all %}
                            <span>This is one of your favorites</span>
                        {% else %}
                            <a href="{% url 'add_favorite' book.id %}">Add to Favorites</a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>
        <a href="{% url 'logout' %}">Log Out</a>
    </div>
</body>
</html>
